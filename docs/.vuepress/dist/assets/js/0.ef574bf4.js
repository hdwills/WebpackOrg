(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(t,a,s){"use strict";s.r(a);var n=s(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"webpackorg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpackorg","aria-hidden":"true"}},[t._v("#")]),t._v(" WebpackOrg")]),s("p",[t._v("webpack 学习笔记，跟着官网的收藏学习一遍。记录其中的重点和有疑问的地方。")]),s("h2",{attrs:{id:"个人总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#个人总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 个人总结")]),s("ul",[s("li",[s("p",[t._v("文章中的代码片段都是针对 webpack.config.js")])]),s("li",[s("p",[t._v("“古老”的标签 "),s("code",[t._v("<script>")]),t._v("，"),s("code",[t._v("<link>")]),t._v(" 加载方式")])]),s("li",[s("p",[t._v("模块化按需请求，定量加载 CommonJS, AMD, CMD, UMD, ES6 模块")])]),s("li",[s("p",[t._v("静态分析，依赖关系，不同类型的代码交给不同的加载器进行处理")])]),s("li",[s("p",[t._v("从 webpack 4.0.0 开始，可以不用引入一个配置文件。可以通过 "),s("code",[t._v("mode")]),t._v(" 选项为 webpack 指定一些默认的配置。")])]),s("li",[s("p",[t._v("webpack 4 里将命令行相关的都迁移到 "),s("code",[t._v("webpack-cli")]),t._v(" 包，在单独执行打包命令时会提示是否安装此包")])])]),s("h2",{attrs:{id:"概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概念","aria-hidden":"true"}},[t._v("#")]),t._v(" 概念")]),s("p",[s("em",[t._v("webpack")]),t._v(" 是一个现代 JavaScript 应用程序的"),s("em",[t._v("静态模块打包器(module bundler)")]),t._v("。当 webpack 处理应用程序时，它会递归地构建一个"),s("em",[t._v("依赖关系图(dependency graph)")]),t._v("，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 "),s("em",[t._v("bundle")]),t._v("。")]),s("h3",{attrs:{id:"核心概念："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心概念：","aria-hidden":"true"}},[t._v("#")]),t._v(" 核心概念：")]),s("h4",{attrs:{id:"入口-entry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入口-entry","aria-hidden":"true"}},[t._v("#")]),t._v(" 入口 entry")]),s("p",[t._v("指示 webpack 应该使用那个模块，来作为构建其内部"),s("em",[t._v("依赖图")]),t._v("的"),s("strong",[t._v("开始")]),t._v("。进入入口起点后，webpack 会"),s("strong",[t._v("找出")]),t._v("有哪些模块和库是入口起点（直接和间接）依赖的。每个依赖"),s("strong",[t._v("随即")]),t._v("被处理，最后输出到称之为 "),s("em",[t._v("bundles")]),t._v(" 的文件中。可指定一个或多个入口起点。")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("h4",{attrs:{id:"输出-output"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出-output","aria-hidden":"true"}},[t._v("#")]),t._v(" 输出 output")]),s("p",[t._v("在哪里输出它所创建的 bundles，以及命名等。")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'path'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("resolve")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'dist'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'my-first-webpack.bundle.js'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("h4",{attrs:{id:"loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader","aria-hidden":"true"}},[t._v("#")]),t._v(" loader")]),s("p",[t._v("loader 让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）。loader 可以将"),s("strong",[t._v("所有类型")]),t._v("的文件转换为 webpack 能够处理的有效模块，然后再利用 webpack 去打包处理。")]),s("ul",[s("li",[s("code",[t._v("test")]),t._v(" 用于标识出应该被对应的 loader 进行转换的某个或某些文件。")]),s("li",[s("code",[t._v("use")]),t._v(" 表示转换时，应该使用哪个 loader。")])]),s("p",[t._v("先看看基础使用，对一个单独的 module 对象定义了 "),s("code",[t._v("rules")]),t._v(" 属性，里面包含两个属性："),s("code",[t._v("test")]),t._v(" 和 "),s("code",[t._v("use")]),t._v("。这告诉 webpack compiler，当你碰到在 "),s("code",[t._v("require()")]),t._v(" / "),s("code",[t._v("import")]),t._v(" 语句中被解析为 '.txt' 的路径时，在你对它打包之前，先使用 "),s("code",[t._v("raw-lader")]),t._v(" （把文件内容作为字符串返回）转换一下。")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'path'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("resolve")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'dist'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'my-first-webpack.bundle.js'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token regex"}},[t._v("/\\.txt$/")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'raw-loader'")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("h4",{attrs:{id:"插件-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" 插件 plugins")]),s("p",[t._v("可以用于执行范围更广的任务（打包优化、压缩、"),s("strong",[t._v("一直到重新定义环境中的变量")]),t._v("）")]),s("p",[s("code",[t._v("require()")]),t._v(" 插件后，加入到 "),s("code",[t._v("plugins")]),t._v(" 数组中，通过选项自定义。你也可以在一个配置文件中因为不同目的而多次使用同一个插件，这时需要通过使用 new 操作符来创建它的一个实例。")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 外部插件")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'webpack'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'path'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v("  config "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("resolve")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'dist'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'my-first-webpack.bundle.js'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  modules"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token regex"}},[t._v("/\\.txt$/")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'raw-loader'")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UglifyJsPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./src/index.html'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("以上只是概念介绍，接下来将根据文档逐步展开。")]),s("h2",{attrs:{id:"入口起点-entry-points"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入口起点-entry-points","aria-hidden":"true"}},[t._v("#")]),t._v(" 入口起点 Entry Points")]),s("p",[t._v("如何去配置 entry 属性")]),s("h3",{attrs:{id:"单个入口（简写）语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单个入口（简写）语法","aria-hidden":"true"}},[t._v("#")]),t._v(" 单个入口（简写）语法")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("这里还支持传入数组，但是均会被当成主入口。"),s("strong",[t._v("文档中引用解释的地方对我来说并不是很容易理解")]),t._v("。而且单个引入，在扩展上也不够灵活。")]),s("h3",{attrs:{id:"对象语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对象语法","aria-hidden":"true"}},[t._v("#")]),t._v(" 对象语法")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./src/app.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendors"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./src/vendors.js'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("p",[t._v("对象语法会比较繁琐。然而，这是应用程序中定义入口的最可扩展的方式。")]),s("h3",{attrs:{id:"常见场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见场景","aria-hidden":"true"}},[t._v("#")]),t._v(" 常见场景")]),s("p",[t._v("以下列出一些入口配置和它们的实际用例：")]),s("h4",{attrs:{id:"分离应用程序-app-和第三方库-vendor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分离应用程序-app-和第三方库-vendor","aria-hidden":"true"}},[t._v("#")]),t._v(" 分离应用程序 "),s("code",[t._v("app")]),t._v(" 和第三方库 "),s("code",[t._v("vendor")])]),s("p",[t._v("入口，比如上面的对象语法。webpack 从 "),s("code",[t._v("app.js")]),t._v(" 和 "),s("code",[t._v("verdors.js")]),t._v(" 开始创建依赖图（dependency graph）。这些依赖图是彼此完全分离、相互独立的（每个 bundle 中都有一个 webpack 引导（bootstrap））。这种方式比较常见于，只有一个入口起点（不包括 vendor）的单页应用程序（single page application）中。")]),s("p",[t._v("这里面提到了"),s("strong",[t._v("依赖图（dependency graph）")]),t._v("，"),s("strong",[t._v("引导（bootstrap）")])]),s("h4",{attrs:{id:"多页应用程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多页应用程序","aria-hidden":"true"}},[t._v("#")]),t._v(" 多页应用程序")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    pageOne"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./src/pageOne/index.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pageTwo"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./src/pageTwo/index.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pageThree"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./src/pageThree/index.js'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("p",[t._v("这部分代码中可以看到有 3 个独立分离的依赖图。详细的解释暂不做分析，只有实际使用过之后才能更好的理解。")]),s("h2",{attrs:{id:"输出-output-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出-output-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 输出 Output")]),s("p",[t._v("配置 "),s("code",[t._v("output")]),t._v(" 选项可以控制 webpack 如何向硬盘写入编译文件。注意，即使可以存在多个"),s("strong",[t._v("入口")]),t._v("起点，但是指指定一个"),s("strong",[t._v("输出")]),t._v("配置。")]),s("h3",{attrs:{id:"用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用法","aria-hidden":"true"}},[t._v("#")]),t._v(" 用法")]),s("p",[t._v("在 webpack 中配置 "),s("code",[t._v("output")]),t._v(" 属性的最低要求是，将它的指设置为一个对象，其中包括如下：")]),s("ul",[s("li",[s("code",[t._v("filename")]),t._v(" 用于输出文件的文件名")]),s("li",[t._v("目标输出目录 "),s("code",[t._v("path")]),t._v(" 的绝对路径\n将一个单独的 "),s("code",[t._v("bundle.js")]),t._v(" 文件输出到 "),s("code",[t._v("/home/proj/public/assets")]),t._v(" 目录中")])]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'bundle.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'/home/proj/public/assets'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("h3",{attrs:{id:"多个入口起点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多个入口起点","aria-hidden":"true"}},[t._v("#")]),t._v(" 多个入口起点")]),s("p",[t._v("如果配置创建了多个单独的“chunk”（例如，使用多个入口起点货使用像 CommonsChunkPlugin 这样的插件），则英噶使用占位符（substitutions） 来却表每个文件具有唯一的名称。")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{attrs:{class:"token string"}},[t._v("'./src/app.js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    search"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./src/search.js'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'[name].js'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" __dirname "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'/dist'")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("这样就能输出对应的文件："),s("code",[t._v("./dist/app.js")]),t._v("，"),s("code",[t._v("./dist/search.js")])]),s("h3",{attrs:{id:"进阶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进阶","aria-hidden":"true"}},[t._v("#")]),t._v(" 进阶")]),s("p",[t._v("因为在实际项目中并没有使用到 CDN，所以对这里的理解只能靠文档里的。暂时不做记录。")]),s("h2",{attrs:{id:"模式-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模式-mode","aria-hidden":"true"}},[t._v("#")]),t._v(" 模式 Mode")]),s("p",[s("code",[t._v("mode")]),t._v(" 是 webpack 4 中新增加的参数选项，其中有两个可选值 "),s("code",[t._v("development")]),t._v(" 和 "),s("code",[t._v("production")]),t._v("，二者必选一。将告知 webpack 使用相应模式的内置优化。")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nwebpack "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("mode"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("production "),s("span",{attrs:{class:"token comment"}},[t._v("// cli")]),t._v("\n")])]),s("h3",{attrs:{id:"production"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#production","aria-hidden":"true"}},[t._v("#")]),t._v(" production")]),s("ul",[s("li",[t._v("默认提供所有可能的优化，如代码压缩、作用域提升等")]),s("li",[t._v("不支持 "),s("code",[t._v("wacthing")])]),s("li",[s("code",[t._v("process.env.NODE_ENV")]),t._v(" 的默认值是 "),s("code",[t._v("production")])])]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// webpack.production.config.js")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// webpack 2/3")]),t._v("\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("UglifyJsPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token comment"}},[t._v("/* ... */")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"process.env.NODE_ENV"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("stringify")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"production"')]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ModuleConcatenationPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MoEmitOnErrorsPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// webpack 4")]),t._v("\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("h3",{attrs:{id:"development"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#development","aria-hidden":"true"}},[t._v("#")]),t._v(" development")]),s("ul",[s("li",[t._v("主要优化了增量构建速度和开发体验")]),s("li",[s("code",[t._v("process.env.NODE_ENV")]),t._v(" 的默认值是 "),s("code",[t._v("development")])]),s("li",[t._v("开发模式下支持注释和提示，并且只是 "),s("code",[t._v("eval")]),t._v(" 下的 "),s("code",[t._v("source maps")])])]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// webpack.development.config.js")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// webpack 2/3")]),t._v("\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NamedModulesPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"process.env.NODE_ENV"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("stringify")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"development"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// webpack 4")]),t._v("\nmodule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'development'")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("h2",{attrs:{id:"loader-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader-2","aria-hidden":"true"}},[t._v("#")]),t._v(" loader")]),s("p",[t._v("loader 用于对模块的源代码进行转换。loader 可以使你在 "),s("code",[t._v("import")]),t._v(" 或“加载”模块时预处理文件。因此，loader 类似于其他构建工具中“任务（task）”，并提供了处理前端构建步骤的强大方法。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript，或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 "),s("code",[t._v("imorot")]),t._v(" CSS 文件。")]),s("h3",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例","aria-hidden":"true"}},[t._v("#")]),t._v(" 示例")]),s("p",[t._v("分别处理 CSS 文件和 TypeScript 文件，通过对应的 loader。")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev css-loader\n"),s("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev ts-loader\n")])]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token regex"}},[t._v("/\\.css$/")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'css-loader'")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token regex"}},[t._v("/\\.ts$/")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'ts-loader'")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("h3",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用")]),s("p",[t._v("分别有如下的使用方式：")]),s("h4",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置")]),s("p",[t._v("在 webpack.config.js 文件中指定 loader。"),s("br"),t._v("\nmodule.rules 允许你在 webpack 配置中指定多个 loader。这是展示 loader 的一种简明方式，并且有助于使代码变得简洁。同时让你对各个 loader 有个全局概览：")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token regex"}},[t._v("/\\.css$/")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loader"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'style-loader'")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'css-loader'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            options"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              modules"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n            "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("h4",{attrs:{id:"内联"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内联","aria-hidden":"true"}},[t._v("#")]),t._v(" 内联")]),s("p",[t._v("在每个 "),s("code",[t._v("import")]),t._v(" 语句中显式指定 loader。"),s("br"),t._v("\n可以在 "),s("code",[t._v("import")]),t._v(" 语句或任何等效于 import 的方式中指定 loader。使用 "),s("code",[t._v("!")]),t._v(" 将资源中的 loader 分开。分开的每个部分都相对于当前目录解析。")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[t._v("import")]),t._v(" Styles from "),s("span",{attrs:{class:"token string"}},[t._v("'style-loader!css-loader?modules!./style.css'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("h4",{attrs:{id:"cli"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cli","aria-hidden":"true"}},[t._v("#")]),t._v(" CLI")]),s("p",[t._v("在 shell 命令中指定 loader，通过 CLI 使用 loader。")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("webpack --module-bind jade-lader --module-bind "),s("span",{attrs:{class:"token string"}},[t._v("'css=style-loader!css-loader'")]),t._v("\n")])]),s("p",[t._v("这会对 "),s("code",[t._v(".jade")]),t._v(" 文件使用 "),s("code",[t._v("jade-loader")]),t._v("，对 "),s("code",[t._v(".css")]),t._v(" 文件使用 "),s("code",[t._v("style-loader")]),t._v(" 和 "),s("code",[t._v("css-loader")]),t._v("。")]),s("h4",{attrs:{id:"loader-特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader-特性","aria-hidden":"true"}},[t._v("#")]),t._v(" loader 特性")]),s("ul",[s("li",[t._v("loader 支持链式传递。能够对资源使用流水线（pipeline）。一组链式的 loader 将按照相反的顺序执行。loader 链中的第一个 loader 返回值给下一个 loader，经过最后一个 loader，返回 webpack 所预期的 JavaScript。")]),s("li",[t._v("loader 可以是同步的，也可以是异步的。")]),s("li",[t._v("loader 运行在 Node.js 中，并且能够执行任何可能的操作。")]),s("li",[t._v("loader 接收查询参数。用于对 loader 传递配置。")]),s("li",[t._v("loader 也能够使用 "),s("code",[t._v("options")]),t._v(" 对象进行配置。")]),s("li",[t._v("除了使用 "),s("code",[t._v("package.json")]),t._v(" 常见的 "),s("code",[t._v("main")]),t._v(" 属性，还可以将普通的 npm 模块导出为 loader，做法是在 "),s("code",[t._v("pack.json")]),t._v(" 里定义一个 "),s("code",[t._v("loader")]),t._v(" 字段。")]),s("li",[t._v("插件 plugin 可以为 loader 带来更多的特性。")]),s("li",[t._v("loader 能够产生额外的任意文件。")])]),s("p",[t._v("loader 通过 loader 预处理函数，为 JavaScript 生态系统提供了更多能力。用户现在可以更加灵活地引入细粒度逻辑，例如压缩、打包、语言翻译和其他更多。")]),s("h4",{attrs:{id:"解析-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解析-loader","aria-hidden":"true"}},[t._v("#")]),t._v(" 解析 loader")]),s("p",[t._v("loader 遵循标准的模块解析。多数情况下，loader 将从模块路径（通常将模块路径认为是 "),s("code",[t._v("npm install")]),t._v("，"),s("code",[t._v("node_modules")]),t._v("）解析。")]),s("p",[t._v("loader 模块需要导出为一个函数，并且使用 Node.js 兼容的 JavaScript 编写。通常使用 npm 进行管理，但是也可以将自定义 loader 作为应用程序中的文件。按照约定，loader 通常被命名为 "),s("code",[t._v("xxx-loader")]),t._v("（例如 "),s("code",[t._v("json-loader")]),t._v("）。更多了解，可以看看如何编写 loader 等相关文章。")]),s("h2",{attrs:{id:"插件-plugins-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件-plugins-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 插件 Plugins")]),s("p",[t._v("插件是 webpack 的支柱功能。webpack 自身也是构建于你在 webpack 配置中用到的相同的插件系统之上！")]),s("p",[t._v("插件的目的在于解决 loader 无法实现的其他事。")]),s("h3",{attrs:{id:"剖析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#剖析","aria-hidden":"true"}},[t._v("#")]),t._v(" 剖析")]),s("p",[t._v("webpack 插件是一个具有 "),s("code",[t._v("apply")]),t._v(" 属性的 JavaScript 对象。"),s("code",[t._v("apply")]),t._v(" 属性会被 webpack compiler 调用，并且 compiler 对象可在整个编译生命周期访问。")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pluginName "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'ConsoleLogOnBuildWebpackPlugin'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ConsoleLogOnBuildWebpackPlugin")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("apply")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compiler"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("tap")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pluginName"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compilation "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'webpack 构建过程开始！'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("p",[t._v("compiler hook 的 tap 方法的第一个参数，应该是驼峰式命名的插件名称。建议为此使用一个常量，以便它可以在所有 hook 中复用。")]),s("h3",{attrs:{id:"用法-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用法-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 用法")]),s("p",[t._v("由于插件可携带参数/选项，你必须在 webpack 配置中，像 "),s("code",[t._v("plugins")]),t._v(" 属性传入 "),s("code",[t._v("new")]),t._v(" 实例。")]),s("p",[t._v("根据你的 webpack 用法，这里有多种方式使用插件。")])])}],!1,null,null,null);a.default=o.exports}}]);